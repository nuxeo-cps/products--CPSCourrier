<tal:comment replace="nothing">
  This special layout expects to find a tabular widget in the last row.
  All other widgets are used to govern filtering/sorting parameters and make up
  a form.

  $Id$
</tal:comment>

<tal:block define="layout options/layout;
		   rows layout/rows;
		   tabular_cell python:rows[-1][0];
		   param_rows python:rows[:-1];
		   ">
  <form action="" method="post">
    <table width="100%" cellpadding="2" cellspacing="2"
	   summary="filter options">
      <tr tal:repeat="row param_rows">
	<td tal:repeat="cell row" tal:attributes="colspan cell/ncols">
	  <tal:block define="widget cell/widget">
	    <span class="dlabel"
		  tal:condition="widget/is_i18n"
		  tal:content="widget/label"
		  i18n:translate=""
		  >
	      label
	    </span>
	    <span class="dlabel" tal:condition="not:widget/is_i18n"
		  tal:content="widget/label">label</span>
	  </tal:block>
	  <tal:block replace="structure cell/widget_rendered" />
	</td>
      </tr>
    </table>
    <input type="submit" name="filter" value="cpscourrier_filter_button"
	   style="float:right" class="context"
	   tal:condition="param_rows"
	   i18n:attributes="value" />
  </form>
  <div style="clear:both"> </div>
  <p>
    <tal:block replace="structure tabular_cell/widget_rendered" />
  </p>
</tal:block>